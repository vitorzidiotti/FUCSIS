{% extends "base.html" %}

{% block title %}Adicionar Produto{% endblock %}

{% block content %}
    <div class="auth-container" style="margin-top: 2rem;">
        <h1>Adicionar Novo Produto</h1>
        {# Usamos form_data para repopular em caso de erro #}
        <form method="POST" action="{{ url_for('produto.adicionar_produto') }}">

            <label for="nome">Nome do Produto:</label>
            <input type="text" id="nome" name="nome" value="{{ form_data.nome if form_data else '' }}" required>

            <label for="marca">Marca:</label>
            <input type="text" id="marca" name="marca" value="{{ form_data.marca if form_data else '' }}" required>

            <label for="preco">Pre√ßo (R$):</label>
            <input type="number" id="preco" name="preco" step="0.01" min="0" value="{{ form_data.preco if form_data else '' }}" required>

            <label for="medida">Medida:</label>
            <select id="medida" name="medida" required>
                <option value="" disabled {% if not form_data or not form_data.medida %}selected{% endif %}>Selecione...</option>
                {% for unidade in unidades %}
                <option value="{{ unidade }}" {% if form_data and form_data.medida == unidade %}selected{% endif %}>{{ unidade|upper }}</option>
                {% endfor %}
            </select>

            <label for="validade">Validade:</label>
            <input type="date" id="validade" name="validade" value="{{ form_data.validade if form_data else '' }}" required min="{{ min_date }}"> {# Adicionado min="{{ min_date }}" #}

            <label for="lote">Lote:</label>
            <input type="text" id="lote" name="lote" value="{{ form_data.lote if form_data else '' }}" required>

            <button type="submit" class="btn btn-green" style="width: 100%; padding: 14px; margin-top: 1rem;">Cadastrar Produto</button>
            <a href="{{ url_for('produto.gerenciar_produtos') }}" class="btn btn-yellow" style="width: 100%; padding: 14px;">Cancelar</a>
        </form>
    </div>
{% endblock %}